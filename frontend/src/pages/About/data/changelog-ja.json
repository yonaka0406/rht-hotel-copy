{
  "entries": [    
    {
      "version": "0.1.0",
      "date": "2025-02-21",
      "changes": [
        { "type": "feature", "description": "カレンダー：予約カレンダーがプランごとに色分けされるようになりました（予約照会と同様）。" },
        { "type": "feature", "description": "予約編集：従業員宿泊インデックスを追加しました。" }
      ]
    },
    {
      "version": "0.2.0",
      "date": "2025-03-07",
      "changes": [
        { "type": "ui", "description": "予約カレンダー：ドラッグ＆ドロップ操作時の警告デザインを変更しました。" },
        { "type": "ui", "description": "予約カレンダー：日付・部屋番号のフォントサイズを大きくしました。" },
        { "type": "feature", "description": "日付選択：Primevue日本語表示と日付範囲分離。" },
        { "type": "feature", "description": "予約：確定済み予約でも部屋数の追加・削減が可能になりました。" },
        { "type": "user-request", "description": "予約編集：日付変更方法の一部対応。" }
      ]
    },
    {
      "version": "0.3.0",
      "date": "2025-03-11",
      "changes": [
        { "type": "feature", "description": "予約カレンダー：満室時の部屋移動（交換）機能を追加。" },
        { "type": "ui", "description": "予約カレンダー：グリッド線を追加。" },
        { "type": "feature", "description": "予約：滞在中の部屋変更をドラッグ＆ドロップで可能に。" },
        { "type": "feature", "description": "予約カレンダー：空室数表示を追加。" }
      ]
    },
    {
      "version": "0.4.0",
      "date": "2025-03-13",
      "changes": [
        { "type": "feature", "description": "出力：予約情報・詳細をCSVで出力可能に。" }
      ]
    },
    {
      "version": "0.5.0",
      "date": "2025-03-14",
      "changes": [
        { "type": "feature", "description": "予約編集：アドオン詳細をyadomaster同様に反映。" },
        { "type": "feature", "description": "予約編集：分割部屋移動の表示方法を変更。" },
        { "type": "feature", "description": "予約：キャンセル後の再有効化が可能に。" }
      ]
    },
    {
      "version": "0.6.0",
      "date": "2025-03-27",
      "changes": [
        { "type": "feature", "description": "新規予約：入力方法を変更。" }
      ]
    },
    {
      "version": "0.7.0",
      "date": "2025-03-28",
      "changes": [
        { "type": "user-request", "description": "予約履歴：更新履歴と担当者の表示（一部対応）。" }
      ]
    },
    {
      "version": "0.8.0",
      "date": "2025-03-31",
      "changes": [
        { "type": "feature", "description": "新規予約：チェックイン・チェックアウト日自動調整。" }
      ]
    },
    {
      "version": "0.9.0",
      "date": "2025-04-01",
      "changes": [
        { "type": "feature", "description": "アドオン：カテゴリ設定と食事数出力。" }
      ]
    },
    {
      "version": "0.9.1",
      "date": "2025-04-07",
      "changes": [
        { "type": "feature", "description": "新規予約：同内容の予約複製（未解決）。" },
        { "type": "feature", "description": "新規予約：プランパターン設定。" },
        { "type": "user-request", "description": "予約編集：予約期間変更時のプランパターン維持（一部対応）。" }
      ]
    },
    {
      "version": "0.9.2",
      "date": "2025-04-17",
      "changes": [
        { "type": "feature", "description": "予約編集：予約詳細でプラン色分け。" },
        { "type": "feature", "description": "顧客：電話番号・メールアドレスで選択可能に。" }
      ]
    },
    {
      "version": "0.9.3",
      "date": "2025-04-22",
      "changes": [
        { "type": "feature", "description": "予約カレンダー：一時未割当の空室移動。" },
        { "type": "feature", "description": "PMS API：Google SheetsとPMS連携による予約照会。" }
      ]
    },
    {
      "version": "0.9.4",
      "date": "2025-05-15",
      "changes": [
        { "type": "feature", "description": "通知：アラート通知の強調表示。" }
      ]
    },
    {
      "version": "0.9.5",
      "date": "2025-05-28",
      "changes": [
        { "type": "feature", "description": "機能：領収書発行。" }
      ]
    },
    {
      "version": "0.9.6",
      "date": "2025-06-10",
      "changes": [
        { "type": "feature", "description": "機能：領収書発行（0.9.5から継続）。" }
      ]
    },
    {
      "version": "1.0.0",
      "date": "2025-06-01",
      "changes": [
        { "type": "feature", "description": "予約管理システム - 直感的なカレンダーインターフェースによる完全な予約ライフサイクル管理" },
        { "type": "feature", "description": "顧客管理・CRM - コミュニケーション追跡機能付きの高度な顧客関係管理システム" },
        { "type": "feature", "description": "ウェイトリストシステム - 自動通知機能付きの包括的なゲスト待機リスト管理" },
        { "type": "feature", "description": "請求・請求書発行 - 柔軟な料金設定、プラン、アドオン、自動請求書生成機能" },
        { "type": "feature", "description": "レポート・分析 - 包括的な運営指標とビジネスインサイト機能" },
        { "type": "feature", "description": "ユーザー管理 - Google OAuth統合によるロールベースアクセス制御" },
        { "type": "feature", "description": "リアルタイム更新 - Socket.io統合によるライブ通知と更新機能" },
        { "type": "feature", "description": "データインポート・エクスポート - 各種データソース用のCSV・Excel対応" },
        { "type": "feature", "description": "メール通知 - nodemailerによる自動コミュニケーション機能" },
        { "type": "feature", "description": "日本語サポート - 完全な日本語テキスト処理・変換機能" },
        { "type": "feature", "description": "包括的ログ機能 - システム・監査証跡機能" },
        { "type": "feature", "description": "OTA統合 - オンライン旅行代理店とのXMLベース通信" },
        { "type": "improvement", "description": "データベース機能 - スキーマ進化用のバージョン管理SQLスクリプト（13個の移行ファイル）" },
        { "type": "improvement", "description": "データ集約 - レポートパフォーマンス用のマテリアライズドビューとサマリーテーブル" },
        { "type": "improvement", "description": "接続プーリング - コンテキスト対応プール選択による最適化されたデータベース接続" },
        { "type": "improvement", "description": "バックグラウンドジョブ - メンテナンスとデータ処理用のスケジュールタスク" },
        { "type": "improvement", "description": "PM2統合 - 本番環境プロセス管理" },
        { "type": "improvement", "description": "開発スクリプト - 開発・デプロイ用の包括的なnpmスクリプト" },
        { "type": "improvement", "description": "環境設定 - 柔軟な環境変数管理" },
        { "type": "improvement", "description": "コード品質 - ESLint設定と開発ガイドライン" },
        { "type": "feature", "description": "レスポンシブデザイン - モバイル対応インターフェース" },
        { "type": "feature", "description": "日本語UI - 完全な日本語言語インターフェース" },
        { "type": "feature", "description": "ロールベース権限 - 詳細なアクセス制御システム" },
        { "type": "feature", "description": "リアルタイム通知 - ライブ更新とシステムアラート" },
        { "type": "feature", "description": "Googleサービス統合 - OAuth認証とAPI統合" },
        { "type": "feature", "description": "決済処理 - セキュアな決済ゲートウェイ統合" },
        { "type": "feature", "description": "メールサービス - 自動通知用SMTP統合" },
        { "type": "feature", "description": "ファイル処理 - PuppeteerによるPDF生成、Sharpによる画像処理" }
      ]
    },
    {
      "version": "1.0.1",
      "date": "2025-06-11",
      "changes": [
        { "type": "bugfix", "description": "本番環境：アドオンが反映されない問題を修正。" },
        { "type": "bugfix", "description": "本番環境：カレンダースクロールでデータが表示されない問題を修正。" },
        { "type": "feature", "description": "本番環境：グローバルプランを非表示に。" },
        { "type": "feature", "description": "CRM：関連会社・関連工事タブを追加。" },
        { "type": "feature", "description": "CRM：ロイヤル顧客機能を追加。" },
        { "type": "user-request", "description": "本番環境：顧客名の表示順を変更（ユーザー要望）。" },
        { "type": "user-request", "description": "CRM：営業アクションの編集機能を追加（ユーザー要望）。" }
      ]
    },
    {
      "version": "1.0.2",
      "date": "2025-06-23",
      "changes": [
        { "type": "feature", "description": "予約：チェックインキャンセル機能を追加（ユーザー要望）。" }
      ]
    },
    {
      "version": "1.0.4",
      "date": "2025-07-17",
      "changes": [
        { "type": "feature", "description": "予約複製機能：別の予約者に予約を複製できるようになりました（内容はそのまま）。" },
        { "type": "bugfix", "description": "カレンダー：日付変更時にスクロール位置がトップにリセットされるよう修正。" },
        { "type": "ui", "description": "カレンダー：部屋セルに区切り線を追加し視認性を向上。" },
        { "type": "refactor", "description": "ローマ字自動大文字化：全大文字入力（例：NTT）をそのまま保持。" },
        { "type": "bugfix", "description": "保留予約作成後、クライアントが即編集可能に。" },
        { "type": "bugfix", "description": "プラン・機関編集から追加したアドオンが即時反映されるよう修正。" },
        { "type": "improvement", "description": "食事数レポート：該当アドオンがない場合に明確なトーストメッセージを表示。" },
        { "type": "bugfix", "description": "食事アドオン数が全予約エクスポート・レポートで正しく集計されるよう修正。" },
        { "type": "user-request", "description": "チェックイン時に予約クライアントが不要に。" },
        { "type": "ui", "description": "カレンダー：全アイコンの意味を説明する凡例を追加。" },
        { "type": "bugfix", "description": "保留中予約削除後、確認プロンプトが自動で閉じるよう修正。" }
      ]
    },
    {
      "version": "1.0.5",
      "date": "2025-07-23",
      "changes": [
        { "type": "performance", "description": "OTA予約がトランザクションで処理されるようになり、同時リクエスト時の重複登録を防止しました。" },
        { "type": "performance", "description": "アドオンの数量計算が予約全体人数ではなく部屋ごとの人数単位になり、複数部屋予約時の数量誤りを修正しました。" },
        { "type": "bugfix", "description": "PrimeVueのConfirmDialogが追加・削除後に正しく閉じるようになりました（Bug #12）。" },
        { "type": "feature", "description": "グローバル予約検索機能をトップメニューに追加。" },
        { "type": "design", "description": "予約一覧のデザインを一部変更。" }
      ]
    },
    {
      "version": "1.0.6",
      "date": "2025-07-28",
      "changes": [
        { "type": "bugfix", "description": "フロントエンド：プラン料金の計算が正しく表示されない問題を修正しました。" },
        { "type": "bugfix", "description": "予約カレンダー：フリームーブ操作後にチェックイン・チェックアウト日が更新されない問題を修正しました。" },
        { "type": "improvement", "description": "ビルドプロセス：メモリ制限のあるVPS環境向けにViteビルド設定を最適化（minification無効化、ソースマップ無効化、スマートチャンキング実装、ES2015ターゲット指定によるメモリ使用量削減）。" }
      ]
    },
    {
      "version": "1.0.7",
      "date": "2025-07-29",
      "changes": [
        { "type": "bugfix", "description": "予約管理：'確定に戻す'ボタンが反応しない問題を修正し、チェックイン済みから確定状態に戻せるようにしました。（Bug #14）" },
        { "type": "bugfix", "description": "予約カレンダー：スクロールバーが消える問題を修正し、必要なときに常に表示されるようにしました。（Bug #18）" },
        { "type": "bugfix", "description": "従業員予約：プラン/価格なしで予約を確定できない問題を修正し、予約タイプの変更制限を実装しました。（Bug #17）" },
        { "type": "bugfix", "description": "ルームインジケーター：キャンセル済み予約が表示される問題を修正し、キャンセル済み予約のみの部屋は空室として表示されるようにしました。（Bug #19）" },
        { "type": "improvement", "description": "権限エラー（403）時に日本語のトースト通知を表示するようにし、ユーザーへのフィードバックを改善しました。" },
        { "type": "feature", "description": "従業員予約：プラン/価格なしでの予約をサポートし、UIでの視覚的区別とタイプ変更時の確認ダイアログを追加しました。" }
      ]
    },
    {
      "version": "1.1.0",
      "date": "2025-08-04",
      "changes": [        
        { "type": "feature", "description": "OTAキュー作成、OTA取引が失敗した際に、通知ドロワーへ表示されるようになりました。" },
        { "type": "feature", "description": "予約照会ボタン：Google スプレッドシートへのリンクをホテルごとに設定可能に" },
        { "type": "feature", "description": "ホテル表示順を設定可能にし、管理画面で順序を編集できるようになりました。" },
        { "type": "feature", "description": "カレンダー：一時的な部屋ブロック機能を追加し、部屋の確保を迅速化" },
        { "type": "ui", "description": "予約カレンダーのモードを「予約移動」から「デフォルト」に名称変更し、分かりやすく改善" },
        { "type": "refactor", "description": "クライアント予約ダイアログをコンポーネント化し、コードの保守性と再利用性を向上" }        
      ]
    },
    {
      "version": "1.1.1",
      "date": "2025-08-12",
      "changes": [
        { "type": "bugfix", "description": "プラン選択なしでアドオンを追加できない問題を修正しました。プランが選択されていない場合もアドオンを追加できるようになりました。（バグ #22）" },
        { "type": "feature", "description": "管理画面にOTAキュー一覧を表示する機能を追加しました。" },
        { "type": "bugfix", "description": "既存の予約に新しい部屋を追加する際に、課金ステータスも正しくコピーされるようになりました。" },
        { "type": "bugfix", "description": "サイドメニューのGoogle Driveリンクが「ページが見つかりません」に遷移する問題を修正しました。" },
        { "type": "bugfix", "description": "トップメニューとサイドメニューでホテル選択が維持されない問題を修正しました。localStorageを使用して選択状態を保持するよう改善しました。" }
      ]
    },
    {
      "version": "1.1.2",
      "date": "2025-08-14",
      "changes": [
        { "type": "feature", "description": "JWTトークン検証を強化し、一時的なネットワークエラーによる誤ったログアウトを防止しました。認証固有のエラー（401/403）の場合のみトークンをクリアするようになりました。" },
        { "type": "feature", "description": "仮ブロック機能のアクセス制御を更新し、データベース管理者だけでなくCRUD権限を持つ全ユーザーが利用できるようになりました。" },
        { "type": "feature", "description": "カレンダーでOTA予約の際に、予約者名ではなく実際の宿泊客名が表示されるよう改善しました。これにより、スタッフが宿泊客を素早く特定しやすくなりました。（機能 #17）" },
        { "type": "feature", "description": "予約一覧からエクスポートするデータにコメント列を追加し、より包括的なデータをエクスポートできるようになりました。" },
        { "type": "feature", "description": "駐車場管理システムを追加し、リアルタイムの空き状況確認と予約への割り当てが可能になりました。（機能 #18）" },
        { "type": "bugfix", "description": "同じ部屋と日付に対して重複する予約詳細が作成される問題を修正しました。NULL値を許容する`cancelled`カラムを含む一意制約を削除し、適切なインデックスとトランザクション処理を実装しました。（バグ #35）" },
        { "type": "bugfix", "description": "ルームインジケーターで「現在宿泊中」ステータスがチェックイン予定日ではなく実際のチェックイン後にのみ表示されるよう修正しました。（バグ #32）" },
        { "type": "bugfix", "description": "複数泊の予約で、部屋ごとの宿泊者数が日によって異なって表示される問題を修正しました。「計算してから作成」パターンを導入し、すべての宿泊日で一貫した人数が表示されるよう改善しました。（バグ #34）" },
        { "type": "bugfix", "description": "otaRoomMaster.vueで単一の部屋タイプを処理する際に発生していたXMLパースエラーを修正しました。" }        
      ]
    },
    {
      "version": "1.1.3",
      "date": "2025-08-15",
      "changes": [
        { "type": "feature", "description": "請求書の氏名表示を姓名（漢字）→ 姓名（カナ）→ 姓名（ローマ字）の順に変更しました。" },
        { "type": "feature", "description": "領収書に部屋番号と宿泊期間（チェックイン〜チェックアウト）を追加し、より詳細な情報を提供できるようになりました。" },
        { "type": "feature", "description": "ルームインジケーターでプラン名を予約詳細から直接取得するように変更し、表示の一貫性を向上させました。" },
        { "type": "feature", "description": "予約詳細エクスポート機能を強化し、より詳細な情報をエクスポートできるようになりました。" },
        { "type": "bugfix", "description": "ダッシュボードのプラン・オプション一覧がAPIデータを正しく表示するように修正しました。" },
        { "type": "bugfix", "description": "空室がない場合に0%を正しく表示するよう稼働率グラフを修正しました。" },
        { "type": "bugfix", "description": "プラン変更時にオプションが残り続ける問題を修正しました。" },
        { "type": "bugfix", "description": "駐車場割り当て時のオプション詳細とユーザー追跡を適切に処理するよう修正しました。" },
        { "type": "bugfix", "description": "一部キャンセル後のチェックイン/チェックアウト日が更新されない問題を修正しました。有効な予約詳細から日付範囲を再計算するよう改善しました。（バグ #35）" },
        { "type": "bugfix", "description": "社員用予約が食事カウントレポートに含まれない問題を修正しました。ステータスを'確定'に設定するよう変更しました。" },
        { "type": "bugfix", "description": "予約のキャンセルと復元ロジックをトランザクション対応させ、データの整合性を確保するよう改善しました。" },
        { "type": "bugfix", "description": "駐車場予約の更新を予約ステータス変更と同じトランザクション内で処理するよう修正し、データ不整合を防止しました。" }
      ]
    },
    {
      "version": "1.1.4",
      "date": "2025-08-20",
      "changes": [
        { "type": "feature", "description": "クライアントと部屋ごとの食事カウントを表示する専用シートを追加し、レポート機能を強化しました。（機能 #28）" },
        { "type": "bugfix", "description": "社員用予約のタイプ変更時にbillable=falseが正しく設定されるよう修正し、財務報告の正確性を確保しました。" },
        { "type": "bugfix", "description": "一括追加機能でオプションが正しく選択されない問題を修正し、各ルームに正しいオプションが割り当てられるようになりました。（バグ #37）" },
        { "type": "bugfix", "description": "販売関連の全ページとエクスポートで、事前計算済みの値と一貫性を保つため、料金をreservation_detailsから直接表示するよう更新しました。（バグ #41）" },
        { "type": "bugfix", "description": "100円単位での一貫した丸め処理を実装し、reservation_detailsの事前計算済み値を使用するよう料金計算ロジックを最適化しました。（バグ #39）" },
        { "type": "bugfix", "description": "複数部屋の予約で部屋の日付を編集する際の不整合な動作を修正し、異なる日付の部屋が適切に新しい予約に移動されるようになりました。（バグ #13）" },
        { "type": "bugfix", "description": "トランザクション処理エラーにより部屋削除が失敗する重大な本番環境の問題を解決しました。（バグ #33）" },
        { "type": "ui", "description": "社員用や無償宿泊などの非課金宿泊を視覚的に識別しやすくするため、全予約ビューで視覚的インジケーターを強化しました。" },
        { "type": "ui", "description": "Google Drive連携を更新し、OTAやWeb予約のクライアント名を適切に処理し、利用可能な場合はreservation_clientsからゲスト名を表示するよう改善しました。" }
      ]
    },
    {
      "version": "1.1.5",
      "date": "2025-08-20",
      "changes": [
        { "type": "feature", "description": "部屋ごとの宿泊者名簿エクスポート機能を追加しました。予約情報に基づいてゲスト情報が自動入力されます。（機能 #31）" },
        { "type": "bugfix", "description": "パターンベースのプラン適用に関する問題を修正しました。plan.jsの[selectPlanByKey]関数を修正し、プランキーの処理とグローバル/ホテルプランIDの検証を適切に行うようにしました。（バグ #41）" }
      ]
    },
    {
      "version": "1.1.6",
      "date": "2025-08-22",
      "changes": [
        { "type": "feature", "description": "カレンダービューとGoogleエクスポートで、日本の会社名の略称（例：'株式会社'→'㈱'）を自動的に変換するクライアント名標準化機能を追加し、システム全体で一貫したフォーマットを実現しました。" },
        { "type": "feature", "description": "個別の予約日をキャンセルする際に請求オプション付きの確認ダイアログを追加し、請求の正確性を向上させました。" },
        { "type": "ui", "description": "部屋インジケーターを改善し、予約者名ではなく実際に宿泊するクライアント名を優先的に表示するようにし、フロント業務の明確化を図りました。" },
        { "type": "feature", "description": "一括編集メニューに請求オプション付きの部屋一括キャンセル機能を実装し、グループ予約管理を効率化しました。（機能 #26）" }
      ]
    },
    {
      "version": "1.1.7",
      "date": "2025-08-25",
      "changes": [        
        { "type": "feature", "description": "Google Driveエクスポートビューを更新し、reservation_detailsの代わりにplans_globalおよびplans_hotelテーブルからデフォルトのプラン名を使用するようにしました。これにより、エクスポート全体で一貫したプラン名が使用されます。" },
        { "type": "feature", "description": "管理者パネルにGoogle Driveスプレッドシートエクスポート用の手動更新コマンドを追加しました（31日間の日付範囲検証付き）。" },
        { "type": "feature", "description": "請求書のコメント書式を改行対応に改善し、Excel請求書生成をテンプレートレイアウトに合わせて最適化しました。" },
        { "type": "feature", "description": "部屋表示アコーディオンにキャンセル日数のバッジ表示を追加し、予約の一部または全部がキャンセルされている場合に視覚的に分かりやすくしました。" }
      ]
    },
    {
      "version": "1.1.8",
      "date": "2025-08-26",
      "changes": [
        { "type": "feature", "description": "Google Sheets API連携のためのWinstonログシステムを実装し、ファイルローテーションとエラートラッキング機能を追加しました。エラーの監視とデバッグが容易になります。" },
        { "type": "feature", "description": "請求書と予約明細のExcelエクスポート機能を追加し、より柔軟なレポート作成が可能になりました。" },
        { "type": "feature", "description": "一時ブロック機能に編集可能なメモ機能を追加し、ブロック作成者がコメントを追加・編集できるようになりました。チーム間のコミュニケーションが向上します。" },
        { "type": "bugfix", "description": "滞在予約の統合処理において、駐車場予約が部屋として誤ってカウントされる問題を修正し、部屋の空き状況の正確な計算を保証しました。" },
        { "type": "bugfix", "description": "部屋のグループ化ロジックに部屋IDの重複排除を実装し、ルームステータス表示でチェックアウトインジケーターが重複して表示される問題を修正しました。" },
        { "type": "feature", "description": "CRMの重複クライアント特定機能とマージ機能を強化し、住所処理の改善、UUIDの適切な型変換、マージ時のリレーションシップ更新の修正を行いました。" }
      ]
    },
    {
      "version": "1.1.9",
      "date": "2025-08-28",
      "changes": [        
        { "type": "feature", "description": "Google Driveに駐車場の空き状況情報を表示する機能を追加（機能 #41）" },
        { "type": "feature", "description": "予約カレンダーと駐車場カレンダーに行の固定とオーバーレイベースの行・列のハイライト機能を追加" },
        { "type": "feature", "description": "予約一覧のフィルターに検索タイプ（宿泊期間/チェックイン日/作成日）の選択を追加" },
        { "type": "bugfix", "description": "予約カレンダーで、部屋と日付に加えて予約IDを含めることでチェックイン/チェックアウト日付のマッピングを正確に行うよう更新" },
        { "type": "bugfix", "description": "駐車場カレンダーで、スクロール時に追加の日付が正しく読み込まれるよう無限スクロールを修正" }
      ]
    },
    {
      "version": "1.1.10",
      "date": "2025-09-01",
      "changes": [
        { "type": "feature", "description": "支払いタイミングフィールドを追加（前払い・現地決済・後払い）" },
        { "type": "feature", "description": "複数日にわたる予約の一部キャンセルを可能にする日付範囲選択機能を追加" },
        { "type": "feature", "description": "長期滞在（30泊以上）向けのキャンセル料計算機を実装" },
        { "type": "bugfix", "description": "確定済み予約に追加された部屋が確実に課金対象となるようステータスチェックを追加" },
        { "type": "bugfix", "description": "カレンダーモード切り替え時のカートアイテムの永続化問題を解消" },
        { "type": "bugfix", "description": "CRMの顧客住所セクションで住所追加ボタンが常に表示されるように修正" },
        { "type": "bugfix", "description": "支払い削除時の確認ダイアログが重複して表示される問題の一時的な対応を実施" }
      ]
    },
    {
      "version": "1.1.11",
      "date": "2025-09-03",
      "changes": [
        { "type": "feature", "description": "ルームインジケーターに複数のプランタイプを日数と共に表示する機能を追加し、各プランの有効な曜日をツールチップで表示するように改善" },
        { "type": "feature", "description": "部屋テーブルに`assignment_priority`カラムを追加し、ホテルごとにカスタマイズ可能な部屋割り当て順を実装" },
        { "type": "feature", "description": "CRMクライアントの支障管理機能を部分的に実装（管理インターフェースのみ、メインページ統合は未対応）" },
        { "type": "bugfix", "description": "チェックイン・チェックアウト日付から実際の宿泊日付に基づくフィルタリングに変更し、チェックイン・アウト範囲外のキャンセル日付も適切に処理するように修正" },
        { "type": "bugfix", "description": "CRMアクションダイアログで、アクションの日時と件名が編集時に正しく読み込まれない問題を修正" }
      ]
    },
    {
      "version": "1.1.12",
      "date": "2025-09-08",
      "changes": [
        { "type": "feature", "description": "重要なコメントを強調表示するためのコメントフラグシステムを追加" },
        { "type": "feature", "description": "ルームインジケーターにチェックアウト日を表示し、予定を一目で確認しやすく改善" },
        { "type": "bugfix", "description": "WebSocketによるルームインジケーターの自動更新が正しく機能するように修正" },
        { "type": "bugfix", "description": "キャンセル済み予約が売上計算に含まれないよう修正し、正確な収益計算を実現" },
        { "type": "bugfix", "description": "ホテル変更時に駐車場の空き状況が正しく更新されない問題を修正" }
      ]
    },
    {
      "version": "1.1.13",
      "date": "2025-09-16",
      "changes": [
        { "type": "feature", "description": "CRMでのクライアント統合操作中にトースト通知を追加し、ユーザーフィードバックを改善" },
        { "type": "feature", "description": "Yadomasterデータのインポート機能を強化し、データ検証とエラーハンドリングを改善" },
        { "type": "feature", "description": "予約編集UIを改善し、フォーム送信中にアクションボタンを無効化して二重送信を防止" },
        { "type": "feature", "description": "長期滞在予約のデータベースクエリを最適化し、パフォーマンスを大幅に改善" },
        { "type": "bugfix", "description": "新規予約時のクライアントドロップダウンにすべての利用可能なクライアントが表示されない問題を修正" }
      ]
    },
    {
      "version": "1.1.14",
      "date": "2025-09-17",
      "changes": [
        { "type": "feature", "description": "複数部屋の一時ブロック機能を実装し、予約追加ドロップダウンから同時に複数部屋をブロックできるようにしました (#51)" },
        { "type": "feature", "description": "レポート月次ビューを強化し、プラン別の内訳と稼働率データの詳細な分析を可能にしました" },
        { "type": "bugfix", "description": "レポートページの'全ホテル'サマリーで部屋数が正しく計算されない問題を修正" },
        { "type": "bugfix", "description": "会計慣行と予測データとの整合性のため、すべての財務レポートを税抜き価格で表示するように修正" }
      ]
    },
    {
      "version": "1.1.15",
      "date": "2025-09-18",
      "changes": [
        { "type": "bugfix", "description": "OTAからの予約でクライアントのプランが正しくマークされない問題を修正" },
        { "type": "bugfix", "description": "支払いタイミングを渡すようにゲストリストダイアログを修正し、現地決済ステータスの定義に使用" },
        { "type": "bugfix", "description": "OTA予約のデフォルト支払いタイミングを'事前支払い'に設定し、ウェブサイト予約の識別を改善" },
        { "type": "bugfix", "description": "ホテルカレンダー機能の日付解析と1日ブロッキングに関する問題に対応" },
        { "type": "feature", "description": "月次レポートのカラーテーマとチャートのデザインを改善" }
      ]
    },
    {
      "version": "1.1.16",
      "date": "2025-09-19",
      "changes": [
        { "type": "bugfix", "description": "`reservedRoomsDayView`が正しく更新・クリアされるようにし、データ永続性と重複キーの問題を解決" },
        { "type": "feature", "description": "予約リストのドロワーに予約編集ページへのナビゲーションボタンを追加" },
        { "type": "feature", "description": "URLパラメータ(`/reservations/day/:date`)を使用した日付永続化を実装し、ページ更新後も選択した日付を維持" },
        { "type": "feature", "description": "レポートモジュールにチャンネル別レポートを追加" },
        { "type": "feature", "description": "レポートモジュールに支払いタイミング別レポートを追加" },
        { "type": "bugfix", "description": "食事カウントレポートの集計日付と昼食提供日の表示を修正" },
        { "type": "bugfix", "description": "予約に宿泊者を追加できないケースを修正" }
      ]
    },
    {      
      "version": "1.1.17",
      "date": "2025-09-24",
      "changes": [
        { "type": "bugfix", "description": "食事カウントエクスポートの日付処理を修正し、選択された日付範囲の全ての食事が正しく含まれるようにしました。また、日本語ロケールでの日付表示を適切にフォーマットするように修正しました。" },
        { "type": "bugfix", "description": "駐車場カレンダーでの新規データ読み込み時の利用可能スポット数のカウントを修正しました。" },
        { "type": "feature", "description": "静的カレンダーページを追加しました。" },
        { "type": "feature", "description": "部屋インジケーターに予約者情報と宿泊者情報（性別表示付き）を追加しました。" },
        { "type": "feature", "description": "ダッシュボードにチェックイン/アウト統計（性別別内訳）を追加しました。日別の内訳やSlack共有用のコピー機能も利用可能です。" },
        { "type": "feature", "description": "月次レポートに、平均滞在日数と予約者区分（個人/法人）の分布を表示する新しいメトリクスを追加しました。" }
      ]
    },
    {     
      "version": "1.1.18",
      "date": "2025-09-29",
      "changes": [
        { "type": "feature", "description": "チェックイン時の宿泊者名簿をエクセル形式でダウンロードする機能を追加しました。宿泊者情報と部屋情報が含まれます。" },
        { "type": "feature", "description": "OTA予約のデフォルト駐車場設定を追加しました（1予約あたり1台）。" },
        { "type": "feature", "description": "チェックアウト取り消し機能を追加しました。" },
        { "type": "feature", "description": "レポートモジュールに平均滞在日数と予約者区分の分布を表示する新しいメトリクスを追加しました。" },
        { "type": "feature", "description": "プラン料金計算の丸め処理を上書きする機能を追加" }
      ]      
    },
    {
      "version": "1.1.19",
      "date": "2025-10-01",
      "changes": [
        { "type": "feature", "description": "`recalculatePlanPrice`関数をリファクタリングし、`disableRounding`のデフォルトを`false`に設定すると共に、内部呼び出しの不具合を修正しました。これにより、`disableRounding`が`true`の場合に丸め処理を無効化できるようになりました。" },
        { "type": "bugfix", "description": "チェックインに基づくエクセル名簿で、1予約あたり複数部屋が表示されるように修正しました。" }
      ]      
    },
    {
      "version": "1.1.20",
      "date": "2025-10-06",
      "changes": [
        { "type": "bugfix", "description": "ダウンロードしたPDFファイルに請求書番号が表示されない問題を修正しました。" },
        { "type": "bugfix", "description": "OTAクライアントの性別選択で正しいXMLフィールドを使用するように修正しました。" },
        { "type": "feature", "description": "請求書PDFファイルにクライアント名を追加し、識別を容易にしました。" },
        { "type": "feature", "description": "レポートにプラン別の売上予測の内訳を追加しました。" },
        { "type": "feature", "description": "空の予約や二重予約を検出・管理するための管理パネル検証画面を追加しました。" }
      ]      
    },
    {
      "version": "1.1.21",
      "date": "2025-10-14",
      "changes": [
        { "type": "bugfix", "description": "売上レポートにアドオン売上が合計金額に含まれていなかった問題を修正しました（駐車場、朝食などのアドオン売上が適切に合計に含まれるようになりました）。" },
        { "type": "feature", "description": "プラン料金やアドオン料金の税抜き価格をデータエクスポートに追加し、税込み/税抜きの金額を明確に表示するようにしました。" },
        { "type": "bugfix", "description": "全室にプランを適用する際のアドオン数量が部屋の収容人数と一致しない問題を修正しました。" },
        { "type": "bugfix", "description": "ゲスト数の増減ボタンを適切に無効化し、複数回の変更を防ぐためのローディング状態を追加しました。" },
        { "type": "bugfix", "description": "部屋更新時に変更された予約期間のプランのみを更新するようにリファクタリングしました。" },
        { "type": "feature", "description": "月次レポートのプラン別売上ビューで、アドオン料金とプラン料金を分離して表示するようにしました。" }
      ]      
    },
    {
      "version": "1.1.22",
      "date": "2025-10-14",
      "changes": [
        { "type": "feature", "description": "プラン別の宿泊状況を確認できる日次レポートのデータダウンロード機能を追加しました。" },
        { "type": "bugfix", "description": "部屋変更後にルームインジケーターで元の部屋と新しい部屋の両方が表示される問題を修正しました。最終日の部屋のみが表示されるようになりました。" },
        { "type": "bugfix", "description": "部屋変更時のプラン再計算を無効化し、元の価格を維持するように修正しました。" }
      ]
    },
    {
      "version": "1.1.23",
      "date": "2025-10-15",
      "changes": [
        { "type": "feature", "description": "部屋管理に水回りの有無を追跡するための真偽値フィールドを追加しました。" },
        { "type": "improvement", "description": "スタティックカレンダーの表示を改善し、部屋タイプごとのグループ化と部屋番号順の並び替えを実装しました。" },
        { "type": "bugfix", "description": "複数部屋予約で1部屋の期間を変更した際に新しい予約が作成されてしまう問題を修正しました。" },
        { "type": "feature", "description": "日次メトリクスに売上情報を追加し、レポート機能を強化しました。" }
      ]
    },
    {
      "version": "1.1.24",
      "date": "2025-10-20",
      "changes": [
        { "type": "bugfix", "description": "ルームインジケーターのページ読み込み時に利用可能な部屋が正しく表示されない問題を修正しました。" },
        { "type": "bugfix", "description": "ルームビューでのクライアント選択が正しくフィルタリングされない問題を修正しました。" },
        { "type": "feature", "description": "予約編集ページに、予約情報をSlackにコピーするボタンを追加しました。" }
      ]
    },
    {
      "version": "1.1.25",
      "date": "2025-10-21",
      "changes": [
        { "type": "bugfix", "description": "特定の日付範囲をキャンセルした際に、チェックイン/チェックアウト日と宿泊人数が正しく更新されない問題を修正しました。" },
        { "type": "feature", "description": "Google Sheets APIリクエストを管理・最適化するための`google_sheets_queue`テーブルを追加し、Google Driveエクスポートの信頼性とパフォーマンスを向上させました。" }
      ]
    },
    {
      "version": "1.1.26",
      "date": "2025-10-23",
      "changes": [
        { "type": "feature", "description": "日次ダイジェストメールのルーチンを追加し、管理パネルでログを確認できるテーブルを追加しました。" },
        { "type": "feature", "description": "新しいバックエンドエンドポイントとCSVジェネレーターサービスを介して、財務インポート用の事前入力済みテンプレートのダウンロード機能を追加しました。" },
        { "type": "bugfix", "description": "部屋ごとのアドオン数量計算を修正しました。" }
      ]
    },
    {
      "version": "1.1.27",
      "date": "2025-10-27",
      "changes": [
        { "type": "feature", "description": "ルームインジケーターに部屋変更予定のクライアント情報を表示する機能を追加しました。" },
        { "type": "feature", "description": "複数部屋の期間変更を部分的に行えるようになりました。" },
        { "type": "feature", "description": "請求書生成を更新し、5桁の顧客コードをファイル名と内容に含めるようにしました。" },
        { "type": "bugfix", "description": "予約分割時にコメント、OTA ID、支払いタイミングなどの基本情報が保持されるように修正しました。" },
        { "type": "bugfix", "description": "スタティックカレンダーでダブルクリック時のドロワーに正しい宿泊人数が表示されるよう修正しました。" }
      ]
    },
    {
      "version": "1.1.28",
      "date": "2025-10-30",
      "changes": [
        { "type": "feature", "description": "OTA通知専用のドロワーを追加し、メインナビゲーションに専用アイコンを設置しました。OTA関連のアラートや失敗をより整理して表示します。" },
        { "type": "bugfix", "description": "宿泊期間内の日付がキャンセルされた場合に、ルームインジケーターが部屋のステータスを適切に管理するように修正しました。" },
        { "type": "bugfix", "description": "予約日の一括キャンセル時に定額料金が正しく除外されない問題を修正し、1日単位のキャンセルと同様の価格ロジックが適用されるようになりました。" }
      ]
    },
    {
      "version": "1.1.29",
      "date": "2025-10-31",
      "changes": [
        { "type": "feature", "description": "日付詳細ダイアログから直接キャンセルタイプ（キャンセル料あり/なし）を変更できる機能を追加しました。" },
        { "type": "feature", "description": "CRMモジュールに顧客リストのダウンロード機能を追加し、CSV/Excel形式でのエクスポートとフィルタリングが可能になりました。" },
        { "type": "feature", "description": "OTA予約の表示を改善し、プランベースの色分けを追加しながらも、OTA予約の視覚的区別を維持しました。" },
        { "type": "bugfix", "description": "同じ予約を共有する複数のクライアントが支払いセクションで同じ請求書IDを受け取っていた問題を修正し、適切な財務追跡のため各クライアントに一意の請求書IDが発行されるようになりました。" },
        { "type": "bugfix", "description": "キャンセルされた日付の支払い計算を修正し、請求対象外のキャンセル日が一括操作時の合計価格に影響を与えないようにしました。" },
        { "type": "bugfix", "description": "Google Sheets APIの認証問題を解決し、Webベースのリクエストに対するリフレッシュトークンの適切な処理を実装し、データ同期の信頼性を向上させました。" }
      ]
    },
    {
      "version": "1.1.30",
      "date": "2025-11-05",
      "changes": [
        { "type": "feature", "description": "予約を複数の部分に分割する機能を実装し、関連するデータと履歴を維持しながら予約を管理できるようになりました。" },
        { "type": "bugfix", "description": "異なる月にまたがる請求書を持つ予約が請求書作成画面に表示されない問題を修正し、適格な予約がすべて正しく表示されるようになりました。" },
        { "type": "bugfix", "description": "請求期間の最終日が正しく請求に含まれるよう、フロントエンドとバックエンド間の日付フォーマットとタイムゾーン処理を統一しました。" }
      ]
    },
    {
      "version": "1.1.31",
      "date": "2025-11-06",
      "changes": [
        { "type": "bugfix", "description": "'販売対象外'の部屋が占有部屋数にカウントされていた問題を修正し、サイトコントローラーに送信される部屋の空き状況データの正確性を向上させました。" },
        { "type": "performance", "description": "Puppeteerをシングルトンからリクエストごとの新しいブラウザインスタンスに変更し、適切に閉じられないことによるメモリリークとヒープエラーを解消しました。" },
        { "type": "bugfix", "description": "ManageHotel.vueコンポーネントで部屋ダイアログが開かない問題を修正し、ホテル管理機能を改善しました。" },
        { "type": "feature", "description": "フロントエンドフォーム用の再利用可能な電話番号とメール検証ユーティリティを作成し、検証ルールを一元管理してすべてのコンポーネントで一貫した検証動作を実現しました。" },
        { "type": "feature", "description": "予約リストで予約を新しいタブで開くように改善し、ユーザーがリスト内の位置を維持したまま予約詳細を確認できるようになりました。" },
        { "type": "feature", "description": "画面の高さが限られた環境での使いやすさを向上させるため、サイドバーにカスタムスクロールバーのスタイリングを追加し、ナビゲーションとコンテンツの視認性を向上させました。" }
      ]
    },
    {
      "version": "1.1.32",
      "date": "2025-11-07",
      "changes": [
        { "type": "user-request", "description": "PDF請求書テンプレートの'顧客コード'を'取引先コード'に変更し、ビジネス用語との一貫性を向上させました。" },
        { "type": "improvement", "description": "WebSocket更新による編集の中断を防ぐため、予約コメントセクションを読み取り専用モードと編集ダイアログに分離しました。" }
      ]
    },
    {
      "version": "1.2.0",
      "date": "2025-11-11",
      "changes": [
        { "type": "feature", "description": "外部ホテル連携のためのスポットブロック機能と駐車スペース管理を備えた包括的な駐車場モジュールを導入しました。" },
        { "type": "feature", "description": "予約カレンダーに部屋交換機能を追加し、移動先の部屋が既に予約されていても部屋の入れ替えが可能になり、ルーム管理の柔軟性が向上しました。" },
        { "type": "bugfix", "description": "大規模な予約の一括編集時にJavaScriptのヒープメモリ不足が発生する問題を修正し、バルク編集時のデータベース接続を最適化して接続プールの枯渇を防ぐようにしました。" }
      ]
    },
    {
      "version": "1.2.1",
      "date": "2025-11-19",
      "changes": [
        { "type": "bugfix", "description": "データベースプーリングの問題を解決。`getRatesForTheDay` および `getPriceForReservation` 関数がトランザクション内で一貫したデータベースクライアントを使用しない問題を修正しました。`getRatesForTheDay` はオプションの `dbClient` を受け取り、関数内で取得した場合のみ解放するように変更。`getPriceForReservation` は渡されたクライアントを `try...finally` 内で適切に使用。関連する呼び出し元も正しいクライアントを渡すように更新しました。" },
        { "type": "bugfix", "description": "部屋インジケーターのリニューアル後、表示されなくなっていたゲスト名と性別情報を復元しました。" },
        { "type": "refactor", "description": "`selectRoomsForIndicator` を「滞在の島」ロジックで再構築し、中間キャンセル日がある場合でも正確にチェックアウト部屋を判定できるようにしました。`early_checkout` と `late_checkin` の定義も調整しました。" },
        { "type": "feature", "description": "ゲストリストExcelエクスポートを強化し、部屋固有のチェックイン・チェックアウト日を表示するように改善しました。部屋変更や部分キャンセルに対応し、非キャンセル日を基に滞在日を算出するようクエリを更新しました。" },
        { "type": "feature", "description": "OTA XMLキューイングとポーリングを実装し、TL-Lincoln APIのレート制限に対応。送信XMLリクエストを `ota_xml_queue` に保存し、非同期で制御された処理を実現しました。" },
        { "type": "feature", "description": "静的カレンダーに「さらに読み込む」ボタンを追加し、より多くの月を表示できるようにしました。" },
        { "type": "improvement", "description": "Websocket更新をログイン中のホテルに限定することで、ユーザーあたりの不要な更新処理を削減し、パフォーマンスを向上しました。" },
        { "type": "refactor", "description": "ゲストリスト（宿泊者名簿）ダイアログを部屋固有のチェックイン・チェックアウト日を使用する形にリファクタリングし、Excel出力との一貫性を確保しました。" }
      ]
    },
    {
      "version": "1.2.2",
      "date": "2025-11-25",
      "changes": [
        { "type": "feature", "description": "部屋テーブルに `is_staff_room` フィールドを追加し、スタッフルームのカテゴライズを改善しました。" },
        { "type": "improvement", "description": "カレンダーUIを更新し、スタッフルームと通常ルームを視覚的に区別できるようにしました。" },
        { "type": "bugfix", "description": "キャンセルにより滞在が分断された場合でも、部屋インジケーターで「本日チェックイン」ステータスを正しく表示するよう修正しました。" },
        { "type": "bugfix", "description": "部屋インジケーターのチェックアウト日計算を修正し、`effective_check_out` に1日を加算して実際のチェックアウト日（最終滞在日の翌日）を正しく表示するようにしました。" },
        { "type": "cleanup", "description": "フロントエンドとバックエンドの一時的なデバッグログを削除しました。" }
      ]
    },    
    {
      "version": "1.2.3",
      "date": "2025-12-01",
      "changes": [
        { "type": "feature", "description": "OTA通知機能を強化し、失敗したXMLキューと統合データ表示を実装しました。" },
        { "type": "feature", "description": "PDF生成をPuppeteerからPlaywrightに移行し、信頼性とパフォーマンスを向上させました。" },
        { "type": "feature", "description": "レシートのバージョン管理システムを追加し、カスタマイズ可能なテンプレートを実装しました。" },
        { "type": "bugfix", "description": "予約プラン変更時に駐車場アドオンが消去される問題を修正しました。プラン変更時にも駐車場アドオンが正しく保持されるようになりました。" },
        { "type": "bugfix", "description": "一時的にブロックされた部屋を予約に変換する際に正しい人数が保存されない問題を修正しました。" }
      ]
    },
    {
      "version": "1.2.4",
      "date": "2025-12-03",
      "changes": [
        { "type": "bugfix", "description": "日別詳細ダイアログでアドオンを追加する際にアドオンが重複して追加される問題を修正しました。" },
        { "type": "refactor", "description": "アドオン管理ロジックを専用モジュールに移動し、メンテナンス性を向上させました。" },        
        { "type": "bugfix", "description": "請求ページでキャンセルされた日付のアドオンが請求可能額に加算されない問題を修正しました。" }
      ]
    },
    {
      "version": "1.3.0",
      "date": "2025-12-04",
      "changes": [
        { "type": "feature", "description": "レポート：プランレートに売上カテゴリを追加し、宿泊以外の売上を個別に追跡できるようにしました。" },
        { "type": "feature", "description": "レポート：宿泊データの詳細な分析のためのデータをダウンロードする機能を追加しました。" },
        { "type": "improvement", "description": "パフォーマンス：selectCountReservationのSQLクエリをマテリアライズドCTEを使用して再構築し、パフォーマンスと可読性を向上させました。" },
        { "type": "improvement", "description": "計算：宿泊以外の売上カテゴリを考慮して稼働率計算を調整しました。" },
        { "type": "bugfix", "description": "日別詳細ダイアログでのアドオン重複追加の問題を修正しました。" },
        { "type": "bugfix", "description": "キャンセルされた日付の請求計算に関する問題を修正しました。" },
        { "type": "refactor", "description": "アドオン管理を専用モジュールにリファクタリングし、コードの整理と保守性を向上させました。" }
      ]
    }
  ],
  "backlog": [
    { "description": "通知：アラート通知設定（例：大口予約受注後1ヶ月後のアラート等）。" },    
    { "description": "CRM：アップロード方式によるデータ記録。" },
    { "description": "CRM：営業クール実績レポート。" },
    { "description": "部屋タイプ階層を導入し、OTA予約のアップグレード判定とインポートロジック（XML→PMS変換、一時テーブル・キャッシュ・未インポート通知・OTA確認成功時のみキャッシュクリア）を改善。" },
    { "description": "予約カレンダー：フリームーブ時に部屋タイプが変更される場合、変更内容を確認するプロンプトを表示。" },
    { "description": "店舗スタッフ向けダッシュボード：必要な情報のみを表示する専用ページを作成（入退室予定の顧客・部屋情報など）。" },
    { "description": "カレンダービュー：部屋移動可能な顧客と部屋タイプの希望がない顧客を視覚的に識別するためのインジケーターを追加。" },
    { "description": "予約パネルからクライアントにFAXを送信する機能を追加（メール経由）。" },
    { "description": "プラン表示順とカテゴリ：プランの表示順を設定可能にし、施設のドロップダウン順を設定可能に。グローバルプランカテゴリを実装し、ホテルプランを部屋タイプごとに整理。" }
  ]
}