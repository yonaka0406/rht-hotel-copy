import{_ as v,u as x,h as _,c as l,a as t,w as a,b as i,o as n,d as e,n as P,t as p,e as w,g as y}from"./index-D1uxBxpa.js";import{s as E}from"./index-B_dfm8Z3.js";import{s as k}from"./index-UBclBOx9.js";import{s as L}from"./index-7jlECg0w.js";import{s as M}from"./index-QDYjf4BC.js";import{s as C}from"./index-CZva3LPW.js";import{s as V}from"./index-C80g0QIn.js";import"./index-UcX-Yj_6.js";const B={components:{InputText:E,Password:k,FloatLabel:L,Card:M,Button:C,Divider:V},data(){return{password:"",confirmPassword:"",passwordError:null,confirmPasswordError:null,isLoading:!1,successMessage:null,errorMessage:null}},setup(){x(),_()},methods:{validatePassword(){const d=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/;this.password?d.test(this.password)?this.passwordError="":this.passwordError="Password must have at least 8 characters, one uppercase letter, one lowercase letter, and one number.":this.passwordError="Password is required.",this.confirmPasswordError=this.confirmPassword!==this.password?"Passwords do not match":null},async handleResetPassword(){if(this.validatePassword(),!(this.passwordError||this.confirmPasswordError)){this.isLoading=!0;try{const s=new URLSearchParams(window.location.search).get("token"),c=await this.$http.post("/api/auth/reset-password",{token:s,password:this.password});this.successMessage=c.data.message}catch{this.errorMessage="Error resetting password. Please try again."}finally{this.isLoading=!1}}}}},R={class:"reset-password-container flex justify-center items-center min-h-screen bg-gray-100 p-4"},A={class:"field mb-6"},D={key:0,class:"p-error"},N={class:"field mb-6"},q={key:0,class:"p-error"},F={class:"mb-4"},S={key:0,class:"text-center text-red-600"},T={key:1,class:"text-center text-green-600"};function U(d,s,c,z,r,m){const g=i("Divider"),u=i("Password"),f=i("FloatLabel"),h=i("Button"),b=i("Card");return n(),l("div",R,[t(b,{class:"w-full max-w-md"},{title:a(()=>s[5]||(s[5]=[e("h2",{class:"text-2xl font-bold mb-6 text-center"},"Reset Password",-1)])),content:a(()=>[e("form",{onSubmit:s[4]||(s[4]=y((...o)=>m.handleResetPassword&&m.handleResetPassword(...o),["prevent"]))},[e("div",A,[t(f,null,{default:a(()=>[t(u,{id:"password",modelValue:r.password,"onUpdate:modelValue":s[0]||(s[0]=o=>r.password=o),toggleMask:"",feedback:"",promptLabel:"Choose a password",weakLabel:"Too simple",mediumLabel:"Average complexity",strongLabel:"Complex password",class:P(["w-full",{"p-invalid":r.passwordError}]),type:"password",required:"",fluid:"",onBlur:s[1]||(s[1]=o=>m.validatePassword())},{header:a(()=>s[6]||(s[6]=[e("div",{class:"font-semibold text-xm mb-4"},"Pick a password",-1)])),footer:a(()=>[t(g),s[7]||(s[7]=e("ul",{class:"pl-2 ml-2 my-0 leading-normal"},[e("li",null,"At least one lowercase"),e("li",null,"At least one uppercase"),e("li",null,"At least one numeric"),e("li",null,"Minimum 8 characters")],-1))]),_:1},8,["modelValue","class"]),s[8]||(s[8]=e("label",{for:"password"},"New Password",-1))]),_:1}),r.passwordError?(n(),l("small",D,p(r.passwordError),1)):w("",!0)]),e("div",N,[t(f,null,{default:a(()=>[t(u,{id:"confirmPassword",modelValue:r.confirmPassword,"onUpdate:modelValue":s[2]||(s[2]=o=>r.confirmPassword=o),toggleMask:"",class:P(["w-full",{"p-invalid":r.confirmPasswordError}]),type:"password",required:"",fluid:"",onBlur:s[3]||(s[3]=o=>m.validatePassword())},null,8,["modelValue","class"]),s[9]||(s[9]=e("label",{for:"confirmPassword"},"Confirm Password",-1))]),_:1}),r.confirmPasswordError?(n(),l("small",q,p(r.confirmPasswordError),1)):w("",!0)]),e("div",F,[t(h,{label:"Reset Password",icon:"pi pi-check",class:"w-full",loading:r.isLoading,type:"submit"},null,8,["loading"])]),r.errorMessage?(n(),l("div",S,p(r.errorMessage),1)):w("",!0),r.successMessage?(n(),l("div",T,p(r.successMessage),1)):w("",!0)],32)]),_:1})])}const Q=v(B,[["render",U]]);export{Q as default};
//# sourceMappingURL=ResetPassword-C0ftlXgX.js.map
