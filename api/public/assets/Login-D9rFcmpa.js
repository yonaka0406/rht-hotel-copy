import{s as y}from"./index-B_dfm8Z3.js";import{s as k}from"./index-UBclBOx9.js";import{s as B}from"./index-7jlECg0w.js";import{s as L}from"./index-QDYjf4BC.js";import{s as P}from"./index-CZva3LPW.js";import{B as V,s as F,o as p,c as u,r as I,m as C,_ as N,a as l,w as d,b as a,d as t,n as f,t as h,e as w,f as S,g as T}from"./index-D1uxBxpa.js";import"./index-UcX-Yj_6.js";var $={root:"p-fluid"},q=V.extend({name:"fluid",classes:$}),A={name:"BaseFluid",extends:F,style:q,provide:function(){return{$pcFluid:this,$parentInstance:this}}},g={name:"Fluid",extends:A,inheritAttrs:!1};function U(e,s,o,m,r,i){return p(),u("div",C({class:e.cx("root")},e.ptmi("root")),[I(e.$slots,"default")],16)}g.render=U;const M={components:{InputText:y,Password:k,FloatLabel:B,Card:L,Button:P,Fluid:g},data(){return{email:"",password:"",error:null,isLoading:!1,emailError:null,passwordError:null}},methods:{validateEmail(){const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;this.emailError=this.email?e.test(this.email)?null:"Invalid email format":"Email is required"},validatePassword(){this.passwordError=this.password?null:"Password is required"},async handleLogin(){var e,s;try{if(this.validateEmail(),this.validatePassword(),this.emailError||this.passwordError)return;this.error=null,this.isLoading=!0;const m=(await this.$http.post("/api/auth/login",{email:this.email,password:this.password})).data.token;localStorage.setItem("authToken",m),this.$router.push("/")}catch(o){o.response?o.response.status===401?this.error=((e=o.response.data)==null?void 0:e.error)||"Invalid credentials.":this.error="An unexpected error occurred. Please try again.":this.error="Network error. Please check your connection.",o.response?o.response.status===401?this.error=((s=o.response.data)==null?void 0:s.error)||"Invalid credentials.":this.error="An unexpected error occurred. Please try again.":this.error="Network error. Please check your connection.",this.error.includes("User not found")?this.emailError=this.error:this.error.includes("Incorrect password")&&(this.passwordError=this.error)}finally{this.isLoading=!1}}}},j={class:"login-container flex justify-center items-center min-h-screen bg-gray-100 p-4"},z={class:"field mb-6"},D={key:0,class:"p-error"},R={class:"field mb-6"},G={key:0,class:"p-error"},H={class:"mb-4"},J={class:"text-center"};function K(e,s,o,m,r,i){const v=a("InputText"),c=a("FloatLabel"),_=a("Password"),x=a("Button"),E=a("router-link"),b=a("Card");return p(),u("div",j,[l(b,{class:"w-full max-w-md"},{title:d(()=>s[3]||(s[3]=[t("h2",{class:"text-2xl font-bold mb-6 text-center"},"Login",-1)])),content:d(()=>[t("form",{onSubmit:s[2]||(s[2]=T((...n)=>i.handleLogin&&i.handleLogin(...n),["prevent"]))},[t("div",z,[l(c,null,{default:d(()=>[l(v,{id:"email",modelValue:r.email,"onUpdate:modelValue":s[0]||(s[0]=n=>r.email=n),class:f(["w-full",{"p-invalid":r.emailError}]),required:"",onBlur:i.validateEmail},null,8,["modelValue","class","onBlur"]),s[4]||(s[4]=t("label",{for:"email"},"Email",-1))]),_:1}),r.emailError?(p(),u("small",D,h(r.emailError),1)):w("",!0)]),t("div",R,[l(c,null,{default:d(()=>[l(_,{id:"password",modelValue:r.password,"onUpdate:modelValue":s[1]||(s[1]=n=>r.password=n),feedback:!1,toggleMask:"",class:f(["w-full",{"p-invalid":r.passwordError}]),type:"password",required:"",fuild:"",onBlur:i.validatePassword},null,8,["modelValue","class","onBlur"]),s[5]||(s[5]=t("label",{for:"password"},"Password",-1))]),_:1}),r.passwordError?(p(),u("small",G,h(r.passwordError),1)):w("",!0)]),t("div",H,[l(x,{label:"Login",icon:"pi pi-sign-in",class:"w-full",loading:r.isLoading,type:"submit"},null,8,["loading"])]),t("div",J,[l(E,{to:"/forgot-password",class:"text-sm text-blue-600"},{default:d(()=>s[6]||(s[6]=[S("Forgot password?")])),_:1})])],32)]),_:1})])}const rs=N(M,[["render",K]]);export{rs as default};
//# sourceMappingURL=Login-D9rFcmpa.js.map
